 <div *ngIf="!toMatCatManager && !toExeCatManager">

  <div fxLayout="row">
    <div  fxFlex="80" fxLayoutAlign="start start">
      <h2 *ngIf="toCreate" class="h2-modal">Ajouter une nouvelle pathologie</h2>
      <h2 *ngIf="!toCreate" class="h2-modal">Editer la pathologie</h2>
    </div>
    <div  fxFlex="20" fxLayoutAlign="end start">
      <button mat-icon-button class="button-right-modal"
        (click)="closeDialog()" type="button">
          <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>


  <form #form="ngForm" autocomplete="off" (ngSubmit)="onSubmit()">

    <div fxLayout="row wrap" fxLayoutAlign="start start">

      <mat-form-field fxFlex="78">
        <input matInput placeholder="Nom de la pathologie" type="text" name="nom"
          [(ngModel)]="formData.nom"
          (ngModelChange)="updateField('nom', formData.nom)"
          id="nom" required>
      </mat-form-field>
      &nbsp;&nbsp;

      <mat-form-field fxFlex="20">
        <input matInput placeholder="Acronyme" type="text" name="acronyme"
          maxlength="3"
          [(ngModel)]="formData.acronyme"
          (ngModelChange)="updateField('acronyme', formData.acronyme)"
          id="acronyme" required>
      </mat-form-field>
      &nbsp;&nbsp;

      <mat-form-field fxFlex="100">
        <textarea matInput placeholder="Descriptif de la pathologie" name="details"
        rows="4" [(ngModel)]="formData.details"
        (ngModelChange)="updateField('details', formData.details)"
        required></textarea>
    </mat-form-field>
      &nbsp;&nbsp;

      <div *ngIf="!toCreate">
        <span *ngFor="let cat of formData.exercicesCategorie" class="bulle-acro"><strong>{{ cat.acronyme }}</strong></span>
        <span *ngFor="let cat of formData.materielsCategorie" class="bulle-acro"><strong>{{ cat.acronyme }}</strong></span>
      </div>

      <div *ngIf="toCreate">
        <span *ngFor="let cat of categoriesService.matCatChipsSelected" class="bulle-acro"><strong>{{ cat.acronyme }}</strong></span>
        <span *ngFor="let cat of categoriesService.exeCatChipsSelected" class="bulle-acro"><strong>{{ cat.acronyme }}</strong></span>
      </div>

      <button mat-fab color="black"
      type="button"
      (click)="toMatCatManager = !toMatCatManager"
      *ngIf="!toExeCatManager"><mat-icon>fitness_center</mat-icon></button>
      &nbsp;&nbsp;

      <button mat-fab color="black"
        type="button"
        (click)="toExeCatManager = !toExeCatManager"
        *ngIf="!toMatCatManager">
       <mat-icon>explicit</mat-icon>
      </button>
      &nbsp;&nbsp;

      <button mat-fab color="warn" type="submit"
        [disabled]="form.invalid"
        *ngIf="toCreate">
          <mat-icon>save</mat-icon>
      </button>

    </div>
  </form>
</div>

<div fxLayout="row wrap" fxLayoutAlign="end start">
  <button mat-icon-button class="button-right-modal" type="button"
  *ngIf="toMatCatManager || toExeCatManager"
  (click)="toMatCatManager = false; toExeCatManager = false">
    <mat-icon>close</mat-icon>
</button>
</div>

<div *ngIf="toMatCatManager">
  <app-categories [noeud]="'mat_cat'" *ngIf="toCreate"></app-categories>
  <app-categories [noeud]="'mat_cat'"
        [currentPathologie]="formData"
        [chipsSelectedInput]="formData.materielsCategorie" *ngIf="!toCreate"></app-categories>
</div>

<div *ngIf="toExeCatManager">
  <app-categories [noeud]="'exe_cat'" *ngIf="toCreate"></app-categories>
  <app-categories [noeud]="'exe_cat'"
        [currentPathologie]="formData"
        [chipsSelectedInput]="formData.exercicesCategorie" *ngIf="!toCreate"></app-categories>
</div>
